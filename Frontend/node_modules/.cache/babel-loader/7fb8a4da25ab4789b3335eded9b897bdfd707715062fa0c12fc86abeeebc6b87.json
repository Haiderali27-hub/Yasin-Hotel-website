{"ast":null,"code":"// API Configuration\nconst API_CONFIG = {\n  // Base URL for API requests\n  BASE_URL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  // Timeout for requests\n  TIMEOUT: 10000,\n  // Default headers\n  HEADERS: {\n    'Content-Type': 'application/json'\n  }\n};\n\n// Helper function to get full API URL\nexport const getApiUrl = (endpoint = '') => {\n  const baseUrl = API_CONFIG.BASE_URL;\n  return endpoint ? `${baseUrl}${endpoint.startsWith('/') ? '' : '/'}${endpoint}` : baseUrl;\n};\n\n// Helper function for fetch requests with proper headers\nexport const apiRequest = async (endpoint, options = {}) => {\n  const url = getApiUrl(endpoint);\n  // Always use adminToken for admin endpoints\n  const token = localStorage.getItem('adminToken');\n  const defaultOptions = {\n    headers: {\n      ...API_CONFIG.HEADERS,\n      ...(token && {\n        'Authorization': `Bearer ${token}`\n      }),\n      ...options.headers\n    }\n  };\n  const finalOptions = {\n    ...defaultOptions,\n    ...options,\n    headers: {\n      ...defaultOptions.headers,\n      ...options.headers\n    }\n  };\n  try {\n    const response = await fetch(url, finalOptions);\n    // If unauthorized, clear admin token and redirect\n    if (response.status === 401) {\n      localStorage.removeItem('adminToken');\n      localStorage.removeItem('adminInfo');\n      localStorage.removeItem('userType');\n      window.location.href = '/admin/login';\n    }\n    return response;\n  } catch (error) {\n    console.error('API Request Error:', error);\n    throw error;\n  }\n};\nexport default API_CONFIG;","map":{"version":3,"names":["API_CONFIG","BASE_URL","process","env","REACT_APP_API_URL","TIMEOUT","HEADERS","getApiUrl","endpoint","baseUrl","startsWith","apiRequest","options","url","token","localStorage","getItem","defaultOptions","headers","finalOptions","response","fetch","status","removeItem","window","location","href","error","console"],"sources":["C:/Users/DELL/Desktop/Yasin Heaven Star Hotel - Copy (2)/frontend/src/config/api.js"],"sourcesContent":["// API Configuration\r\nconst API_CONFIG = {\r\n    // Base URL for API requests\r\n    BASE_URL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\r\n\r\n    // Timeout for requests\r\n    TIMEOUT: 10000,\r\n\r\n    // Default headers\r\n    HEADERS: {\r\n        'Content-Type': 'application/json',\r\n    }\r\n};\r\n\r\n// Helper function to get full API URL\r\nexport const getApiUrl = (endpoint = '') => {\r\n    const baseUrl = API_CONFIG.BASE_URL;\r\n    return endpoint ? `${baseUrl}${endpoint.startsWith('/') ? '' : '/'}${endpoint}` : baseUrl;\r\n};\r\n\r\n// Helper function for fetch requests with proper headers\r\nexport const apiRequest = async (endpoint, options = {}) => {\r\n    const url = getApiUrl(endpoint);\r\n    // Always use adminToken for admin endpoints\r\n    const token = localStorage.getItem('adminToken');\r\n\r\n    const defaultOptions = {\r\n        headers: {\r\n            ...API_CONFIG.HEADERS,\r\n            ...(token && { 'Authorization': `Bearer ${token}` }),\r\n            ...options.headers,\r\n        },\r\n    };\r\n\r\n    const finalOptions = {\r\n        ...defaultOptions,\r\n        ...options,\r\n        headers: {\r\n            ...defaultOptions.headers,\r\n            ...options.headers,\r\n        },\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(url, finalOptions);\r\n        // If unauthorized, clear admin token and redirect\r\n        if (response.status === 401) {\r\n            localStorage.removeItem('adminToken');\r\n            localStorage.removeItem('adminInfo');\r\n            localStorage.removeItem('userType');\r\n            window.location.href = '/admin/login';\r\n        }\r\n        return response;\r\n    } catch (error) {\r\n        console.error('API Request Error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport default API_CONFIG;"],"mappings":"AAAA;AACA,MAAMA,UAAU,GAAG;EACf;EACAC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;EAEtE;EACAC,OAAO,EAAE,KAAK;EAEd;EACAC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,SAAS,GAAGA,CAACC,QAAQ,GAAG,EAAE,KAAK;EACxC,MAAMC,OAAO,GAAGT,UAAU,CAACC,QAAQ;EACnC,OAAOO,QAAQ,GAAG,GAAGC,OAAO,GAAGD,QAAQ,CAACE,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,GAAGF,QAAQ,EAAE,GAAGC,OAAO;AAC7F,CAAC;;AAED;AACA,OAAO,MAAME,UAAU,GAAG,MAAAA,CAAOH,QAAQ,EAAEI,OAAO,GAAG,CAAC,CAAC,KAAK;EACxD,MAAMC,GAAG,GAAGN,SAAS,CAACC,QAAQ,CAAC;EAC/B;EACA,MAAMM,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EAEhD,MAAMC,cAAc,GAAG;IACnBC,OAAO,EAAE;MACL,GAAGlB,UAAU,CAACM,OAAO;MACrB,IAAIQ,KAAK,IAAI;QAAE,eAAe,EAAE,UAAUA,KAAK;MAAG,CAAC,CAAC;MACpD,GAAGF,OAAO,CAACM;IACf;EACJ,CAAC;EAED,MAAMC,YAAY,GAAG;IACjB,GAAGF,cAAc;IACjB,GAAGL,OAAO;IACVM,OAAO,EAAE;MACL,GAAGD,cAAc,CAACC,OAAO;MACzB,GAAGN,OAAO,CAACM;IACf;EACJ,CAAC;EAED,IAAI;IACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAEM,YAAY,CAAC;IAC/C;IACA,IAAIC,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MACzBP,YAAY,CAACQ,UAAU,CAAC,YAAY,CAAC;MACrCR,YAAY,CAACQ,UAAU,CAAC,WAAW,CAAC;MACpCR,YAAY,CAACQ,UAAU,CAAC,UAAU,CAAC;MACnCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,cAAc;IACzC;IACA,OAAON,QAAQ;EACnB,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC1C,MAAMA,KAAK;EACf;AACJ,CAAC;AAED,eAAe3B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}