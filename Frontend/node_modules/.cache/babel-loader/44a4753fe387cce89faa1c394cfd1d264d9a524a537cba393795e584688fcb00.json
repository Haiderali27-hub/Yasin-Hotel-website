{"ast":null,"code":"import _objectSpread from\"c:/Users/DELL/Desktop/Yasin Heaven Star Hotel/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import AdminLayout from'../components/AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminRooms=()=>{const[rooms,setRooms]=useState([]);const[form,setForm]=useState({number:'',type:'',price:'',status:'available',description:''});const[editingId,setEditingId]=useState(null);const[error,setError]=useState('');const fetchRooms=async()=>{const res=await fetch('/api/rooms',{headers:{Authorization:'Bearer '+localStorage.getItem('adminToken')}});setRooms(await res.json());};useEffect(()=>{fetchRooms();},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();setError('');try{const method=editingId?'PUT':'POST';const url=editingId?\"/api/rooms/\".concat(editingId):'/api/rooms';const res=await fetch(url,{method,headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem('adminToken')},body:JSON.stringify(form)});if(!res.ok)throw new Error('Error saving room');setForm({number:'',type:'',price:'',status:'available',description:''});setEditingId(null);fetchRooms();}catch(err){setError('Failed to save room');}};const handleEdit=room=>{setForm(room);setEditingId(room._id);};const handleDelete=async id=>{if(!window.confirm('Delete this room?'))return;await fetch(\"/api/rooms/\".concat(id),{method:'DELETE',headers:{Authorization:'Bearer '+localStorage.getItem('adminToken')}});fetchRooms();};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Rooms\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{name:\"number\",placeholder:\"Number\",value:form.number,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"type\",placeholder:\"Type\",value:form.type,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"number\",placeholder:\"Price\",value:form.price,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:form.status,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"booked\",children:\"Booked\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintenance\",children:\"Maintenance\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"description\",placeholder:\"Description\",value:form.description,onChange:handleChange}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[editingId?'Update':'Add',\" Room\"]}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:error})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rooms.map(room=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:room.number}),/*#__PURE__*/_jsx(\"td\",{children:room.type}),/*#__PURE__*/_jsx(\"td\",{children:room.price}),/*#__PURE__*/_jsx(\"td\",{children:room.status}),/*#__PURE__*/_jsx(\"td\",{children:room.description}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(room),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(room._id),children:\"Delete\"})]})]},room._id))})]})]})});};export default AdminRooms;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}