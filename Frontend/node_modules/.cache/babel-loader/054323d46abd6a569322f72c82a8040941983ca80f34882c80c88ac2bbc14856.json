{"ast":null,"code":"import _objectSpread from\"c:/Users/DELL/Desktop/Yasin Heaven Star Hotel/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import AdminLayout from'../components/AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUsers=()=>{const[users,setUsers]=useState([]);const[form,setForm]=useState({name:'',email:'',password:''});const[editingId,setEditingId]=useState(null);const[error,setError]=useState('');const fetchUsers=async()=>{const res=await fetch('/api/users',{headers:{Authorization:'Bearer '+localStorage.getItem('adminToken')}});setUsers(await res.json());};useEffect(()=>{fetchUsers();},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();setError('');try{const method=editingId?'PUT':'POST';const url=editingId?\"/api/users/\".concat(editingId):'/api/users';const res=await fetch(url,{method,headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem('adminToken')},body:JSON.stringify(form)});if(!res.ok)throw new Error('Error saving user');setForm({name:'',email:'',password:''});setEditingId(null);fetchUsers();}catch(err){setError('Failed to save user');}};const handleEdit=user=>{setForm({name:user.name,email:user.email,password:''});setEditingId(user._id);};const handleDelete=async id=>{if(!window.confirm('Delete this user?'))return;await fetch(\"/api/users/\".concat(id),{method:'DELETE',headers:{Authorization:'Bearer '+localStorage.getItem('adminToken')}});fetchUsers();};return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Users\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"Name\",value:form.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",placeholder:\"Email\",value:form.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",value:form.password,onChange:handleChange,required:!editingId}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[editingId?'Update':'Add',\" User\"]}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:error})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(user),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(user._id),children:\"Delete\"})]})]},user._id))})]})]})});};export default AdminUsers;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}